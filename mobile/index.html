<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Nestara Shock Measurement</title>
  <link rel="stylesheet" href="style.css">
  <meta name="theme-color" content="#4A148C">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
</head>
<body>
  <div class="app-container">
    <header>
      <div class="logo">
        <svg viewBox="0 0 500 500" xmlns="http://www.w3.org/2000/svg" width="120" height="40">
          <g transform="translate(50, 80) scale(1)">
            <!-- Small horizontal line (top left) -->
            <rect x="130" y="120" width="60" height="12" rx="6" fill="#662C6C" />
            
            <!-- Medium circle (left) -->
            <circle cx="200" cy="200" r="60" fill="#662C6C" />
            
            <!-- Large circle (top right) -->
            <circle cx="320" cy="120" r="70" fill="#662C6C" />
            
            <!-- Small horizontal line (bottom left) -->
            <rect x="120" y="280" width="60" height="12" rx="6" fill="#662C6C" />
            
            <!-- Longer horizontal line (bottom) -->
            <rect x="180" y="320" width="120" height="12" rx="6" fill="#662C6C" />
            
            <!-- Crescent moon shape -->
            <path d="M140 250 C 180 120, 300 180, 400 250 C 340 350, 200 350, 140 250" 
                  fill="none" stroke="#662C6C" strokeWidth="30" strokeLinecap="round" />
          </g>
        </svg>
        <span>Nestara</span>
      </div>
    </header>

    <main>
      <div id="landing-screen" class="screen active">
        <h1>Vibration Measurement</h1>
        <p>Place phone on the neonatal bed tray to measure shock and vibration</p>
        <button id="start-button" class="primary-button">Start Measuring</button>
      </div>

      <div id="measuring-screen" class="screen">
        <div class="status-indicator">
          <div class="pulse-ring"></div>
          <span id="status-text">Measuring</span>
        </div>

        <div class="readings-container">
          <div class="reading">
            <span class="label">X-axis</span>
            <span id="x-value" class="value">0.00</span>
          </div>
          <div class="reading">
            <span class="label">Y-axis</span>
            <span id="y-value" class="value">0.00</span>
          </div>
          <div class="reading">
            <span class="label">Z-axis</span>
            <span id="z-value" class="value">0.00</span>
          </div>
          <div class="reading total">
            <span class="label">Total Movement</span>
            <span id="total-value" class="value">0.00</span>
          </div>
        </div>

        <div class="timer">
          <span id="timer-display">00:00</span>
        </div>

        <button id="stop-button" class="primary-button stop">Stop Measuring</button>
      </div>

      <div id="results-screen" class="screen">
        <h1>Measurement Complete</h1>
        
        <div class="results-summary">
          <div class="result-item">
            <span class="label">Session Duration</span>
            <span id="duration-result" class="value">00:00</span>
          </div>
          <div class="result-item">
            <span class="label">Peak Movement</span>
            <span id="peak-result" class="value">0.00</span>
          </div>
          <div class="result-item">
            <span class="label">Average Movement</span>
            <span id="avg-result" class="value">0.00</span>
          </div>
        </div>

        <div class="action-buttons">
          <button id="send-button" class="primary-button send">Send to Dashboard</button>
          <button id="new-measurement-button" class="secondary-button">New Measurement</button>
        </div>
      </div>
    </main>

    <div id="permission-denied" class="overlay">
      <div class="dialog">
        <h2>Sensor Access Required</h2>
        <p>This app needs access to motion sensors to measure vibration.</p>
        <p>Please enable motion sensors in your browser settings and try again.</p>
        <button id="retry-button" class="primary-button">Retry</button>
      </div>
    </div>

    <div id="no-sensors" class="overlay">
      <div class="dialog">
        <h2>Sensors Not Available</h2>
        <p>Your device does not have the required motion sensors or they are not accessible.</p>
        <p>Please try using a different device.</p>
        <button id="ok-button" class="primary-button">OK</button>
      </div>
    </div>

    <div id="sending-data" class="overlay">
      <div class="dialog">
        <div class="spinner"></div>
        <p>Sending measurement data...</p>
      </div>
    </div>

    <div id="success-message" class="overlay">
      <div class="dialog">
        <div class="success-icon">âœ“</div>
        <h2>Data Sent Successfully</h2>
        <p>Your measurement has been added to the Nestara dashboard.</p>
        <button id="success-ok-button" class="primary-button">OK</button>
      </div>
    </div>

    <div id="error-message" class="overlay">
      <div class="dialog">
        <h2>Connection Error</h2>
        <p>Unable to send measurement data. The data will be saved locally.</p>
        <p>You can try sending it again later.</p>
        <button id="error-ok-button" class="primary-button">OK</button>
      </div>
    </div>
  </div>

  <script src="measure.js"></script>
</body>
</html>